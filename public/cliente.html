<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./images/logo.jpg" type="image/x-icon">
    <title>üçÄ Bar Irlanda - Men√∫ Digital</title>
    <style>/* ESTILOS BASE CON PALETA AMARILLO-BLANCO-NEGRO */
/* ESTILOS BASE CON PALETA AMARILLO-BLANCO-NEGRO MEJORADA */
/* ESTILOS BASE CON PALETA AMARILLO-BLANCO-NEGRO */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

:root {
    --primary-yellow: #FFD700;
    --yellow-dark: #FFA500;
    --yellow-light: #FFFACD;
    --primary-white: #FFFFFF;
    --primary-black: #000000;
    --gray-dark: #333333;
    --gray-medium: #666666;
    --gray-light: #F5F5F5;
    --red-accent: #FF0000;
    --shadow-color: rgba(0,0,0,0.3);
}

body {
    background: linear-gradient(135deg, var(--primary-black) 0%, var(--gray-dark) 100%);
    color: var(--gray-dark);
    min-height: 100vh;
    padding: 20px;
}

.container {
    max-width: 500px;
    margin: 0 auto;
    background: var(--primary-white);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 10px 30px var(--shadow-color);
    border: 3px solid var(--primary-yellow);
}

/* HEADER */
.header {
    background: 
        /* Fondo con opacidad para que el logo se vea */
        linear-gradient(to right, rgba(0, 0, 0, 0.7), rgba(51, 51, 51, 0.8)),
        /* Logo de fondo centrado */
        url('./images/logo.jpg') center center no-repeat;
    background-size: cover, contain;
    color: var(--primary-white);
    padding: 25px 20px;
    text-align: center;
    position: relative;
    border-bottom: 5px solid var(--primary-yellow);
    min-height: 180px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.header h1 {
    font-size: 28px;
    margin-bottom: 5px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    color: var(--primary-yellow);
}

.table-info {
    background: rgba(255, 215, 0, 0.2);
    padding: 8px 15px;
    border-radius: 50px;
    display: inline-block;
    margin-top: 10px;
    font-weight: bold;
    color: var(--primary-yellow);
    border: 2px solid var(--primary-yellow);
}

.client-time {
    margin-top: 10px;
    font-size: 14px;
    opacity: 0.9;
    font-family: monospace;
    color: var(--primary-white);
}

/* SECCIONES */
.section {
    padding: 20px;
    display: none;
}

.section.active {
    display: block;
}

.section-title {
    color: var(--primary-black);
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--primary-yellow);
    font-size: 22px;
    font-weight: bold;
}

/* FILTROS DE CATEGOR√çAS - VERSI√ìN MEJORADA */
.categories-filter {
    display: flex;
    overflow-x: auto;
    gap: 10px;
    padding: 15px 0 25px; /* M√°s padding abajo para el indicador */
    margin-bottom: 10px; /* Reducido para que el indicador quede justo debajo */
    scrollbar-width: none;
    position: relative; /* Para posicionar el indicador */
}

/* EN SU LUGAR, agregar estilos para la barra de scroll visible */
.categories-filter::-webkit-scrollbar {
    height: 6px; /* Hacerla m√°s delgada y visible */
}

.categories-filter::-webkit-scrollbar-track {
    background: var(--gray-light);
    border-radius: 3px;
    margin: 0 10px; /* Margen a los lados */
}

.categories-filter::-webkit-scrollbar-thumb {
    background: var(--primary-yellow); /* Amarillo brillante */
    border-radius: 3px;
    border: 1px solid var(--yellow-dark);
}

.categories-filter::-webkit-scrollbar-thumb:hover {
    background: var(--yellow-dark);
}

/* O si prefieres mantenerla oculta pero con indicador fijo, usa esto: */
.categories-filter-container {
    position: relative;
    margin-bottom: 20px;
}

/* Indicador fijo amarillo debajo de los botones */
.scroll-hint {
    position: absolute;
    bottom: 5px;
    left: 0;
    right: 0;
    height: 3px;
    background: rgba(255, 215, 0, 0.3); /* Amarillo suave de fondo */
    border-radius: 3px;
    overflow: hidden;
    z-index: 1;
}

/* La parte deslizante del indicador */
.scroll-hint::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%; /* Ancho inicial */
    background: var(--primary-yellow); /* Amarillo brillante */
    border-radius: 3px;
    animation: scrollHintPulse 2s infinite;
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

@keyframes scrollHintPulse {
    0%, 100% {
        opacity: 0.7;
        box-shadow: 0 0 5px rgba(255, 215, 0, 0.3);
    }
    50% {
        opacity: 1;
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
    }
}



@keyframes bounceArrow {
    0%, 100% {
        transform: translateX(0);
    }
    50% {
        transform: translateX(3px);
    }
}


/* CORRECCI√ìN PARA BOTONES DE CATEGOR√çA */
.category-btn {
    padding: 10px 15px;
    border: 2px solid var(--gray-medium);
    background: var(--gray-dark); /* Fondo negro cuando no est√° activo */
    color: var(--primary-white); /* Letras blancas cuando no est√° activo */
    border-radius: 50px;
    white-space: nowrap;
    cursor: pointer;
    transition: all 0.3s;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 8px;
    flex-shrink: 0;
    font-size: clamp(12px, 3vw, 14px);
}

.category-btn.active {
    border-color: var(--primary-yellow);
    transform: scale(1.10);
}

.category-btn:hover:not(.active) {
    border-color: var(--primary-yellow);
    background: var(--gray-medium); /* Mantener fondo oscuro en hover */
    color: var(--primary-white); /* Mantener letras blancas en hover */
    transform: translateY(-2px);
}

/* Opcional: Si quieres que el bot√≥n activo tambi√©n cambie en hover */
.category-btn.active:hover {
    background: black; /* Un amarillo m√°s oscuro en hover */
    color: black; /* Mantener letras negras */
    transform: translateY(-2px) scale(1.05);
}

.category-icon {
    font-size: 18px;
}






/* GRID DE PRODUCTOS MEJORADO */
.menu-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 15px;
    margin-top: 10px;
}

.product-card {
    background: var(--primary-white);
    border-radius: 15px;
    padding: 12px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    border: 2px solid var(--gray-light);
    transition: all 0.3s;
    cursor: pointer;
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
}



/* IMAGEN DE PRODUCTO */
.product-image {
    width: 100%;
    height: 140px;
    border-radius: 12px;
    overflow: hidden;
    margin-bottom: 10px;
    background: var(--gray-light);
}

.product-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}


.product-card:hover {
    transform: translateY(-5px);
    border-color: var(--primary-yellow);
    box-shadow: 0 10px 20px rgba(255, 215, 0, 0.2);
}

.product-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    background: var(--primary-black);
    color: var(--primary-white);
    padding: 3px 8px;
    border-radius: 10px;
    font-size: 11px;
    font-weight: bold;
}

.product-name {
    font-weight: bold;
    color: var(--primary-black);
    margin-bottom: 4px;
    font-size: 15px;
    min-height: auto;
}


.product-description {
    color: var(--gray-medium);
    font-size: 13px;
    margin-bottom: 6px;
    line-height: 1.4;
}


.product-price {
    color: var(--primary-black);
    font-weight: bold;
    font-size: 18px;
    margin: 10px 0;
    text-align: center;
}


.add-btn {
    background: var(--primary-black);
    color: var(--primary-white);
    border: 2px solid var(--primary-yellow);
    padding: 10px 15px;
    border-radius: 8px;
    cursor: pointer;
    width: 100%;
    font-weight: bold;
    font-size: 14px;
    transition: all 0.3s;
}


.add-btn:hover {
    background: var(--primary-yellow);
    color: var(--primary-black);
    transform: translateY(-2px);
}


/* MODAL DE CANTIDAD */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.8);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    padding: 20px;
}

.modal-overlay.active {
    display: flex;
}

.quantity-modal {
    background: var(--primary-white);
    border-radius: 20px;
    padding: 30px;
    width: 100%;
    max-width: 400px;
    text-align: center;
    animation: modalSlideIn 0.3s ease;
    border: 3px solid var(--primary-yellow);
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: translateY(-30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.modal-product-name {
    color: var(--primary-black);
    font-size: 22px;
    margin-bottom: 10px;
    font-weight: bold;
}

.modal-product-price {
    color: var(--primary-black);
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 20px;
}

.quantity-selector {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    margin: 25px 0;
}

.qty-btn {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: none;
    background: var(--primary-black);
    color: var(--primary-white);
    font-size: 24px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
}

.qty-btn:hover {
    background: var(--primary-yellow);
    color: var(--primary-black);
    transform: scale(1.1);
}

.qty-display {
    font-size: 32px;
    font-weight: bold;
    min-width: 60px;
    color: var(--primary-black);
}

.notes-input {
    width: 100%;
    padding: 12px;
    border: 2px solid var(--gray-medium);
    border-radius: 10px;
    margin: 15px 0;
    font-size: 16px;
    background: var(--primary-white);
    color: var(--primary-black);
}

.notes-input:focus {
    border-color: var(--primary-yellow);
    outline: none;
    box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.2);
}

.modal-actions {
    display: flex;
    gap: 10px;
    margin-top: 20px;
}

.modal-btn {
    flex: 1;
    padding: 15px;
    border: none;
    border-radius: 10px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
}

.modal-cancel {
    background: var(--gray-light);
    color: var(--primary-black);
    border: 2px solid var(--gray-medium);
}

.modal-cancel:hover {
    background: var(--gray-medium);
    color: var(--primary-white);
    transform: translateY(-2px);
}

.modal-confirm {
    background: linear-gradient(to right, #FF8C00, #FF8C00);
    color: var(--primary-black);
    border: 2px solid var(--primary-yellow);
}

.modal-confirm:hover {
    background: linear-gradient(to right, var(--yellow-dark), #FF8C00);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
}

/* SELECTOR DE PERSONA */
.person-selector-container {
    margin-bottom: 20px;
    padding: 15px;
    background: var(--yellow-light);
    border-radius: 10px;
    display: none;
    border: 2px solid var(--primary-yellow);
}

.person-selector-title {
    font-weight: bold;
    color: var(--primary-black);
    margin-bottom: 10px;
    font-size: 16px;
}

.people-selector {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.person-btn {
    padding: 10px 15px;
    border: 2px solid var(--primary-black);
    border-radius: 10px;
    background: var(--primary-white);
    cursor: pointer;
    transition: all 0.3s;
    font-weight: 600;
    color: var(--primary-black);
}

.person-btn.active {
    text-decoration-color: #000000;
    color: var(--primary-yellow);
    border: 5px solid var(--primary-yellow);
   
}

.person-btn:hover:not(.active) {
    background: var(--gray-light);
    border-color: var(--primary-yellow);
}

/* MODAL DE WiFi */
.wifi-modal {
    background: var(--primary-white);
    border-radius: 20px;
    padding: 30px;
    width: 100%;
    max-width: 450px;
    text-align: center;
    animation: modalSlideIn 0.3s ease;
    border: 3px solid #4CAF50;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

.wifi-details {
    background: #f8f9fa;
    border-radius: 15px;
    padding: 20px;
    margin: 20px 0;
    border: 2px solid #e8f5e9;
}

.wifi-info-group {
    margin-bottom: 20px;
    text-align: left;
}

.wifi-info-group:last-child {
    margin-bottom: 0;
}

.wifi-label {
    font-weight: bold;
    color: var(--primary-black);
    margin-bottom: 8px;
    font-size: 15px;
    display: flex;
    align-items: center;
}

.wifi-value {
    background: var(--primary-white);
    padding: 12px 15px;
    border-radius: 10px;
    font-family: monospace;
    font-size: 16px;
    color: var(--primary-black);
    border: 2px solid #ddd;
    word-break: break-all;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 10px;
}

.wifi-instructions {
    background: var(--primary-white);
    padding: 15px;
    border-radius: 10px;
    font-size: 14px;
    line-height: 1.6;
    color: var(--gray-dark);
    border: 2px solid #e8f5e9;
}

/* Botones de copiar */
.copy-btn {
    background: #4CAF50;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 6px;
    font-size: 13px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    flex-shrink: 0;
}

.copy-btn:hover {
    background: #2E7D32;
    transform: translateY(-2px);
    box-shadow: 0 3px 10px rgba(76, 175, 80, 0.3);
}

.copy-btn.copied {
    background: #2196F3;
}

.show-password-btn {
    background: #FF9800;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 6px;
    font-size: 13px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    flex-shrink: 0;
}

.show-password-btn:hover {
    background: #EF6C00;
    transform: translateY(-2px);
}

.show-password-btn.showing {
    background: #9C27B0;
}

/* Animaci√≥n para copiado */
@keyframes copiedAnimation {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.1);
    }
    100% {
        transform: scale(1);
    }
}

.copied-animation {
    animation: copiedAnimation 0.5s ease;
}



/* Bot√≥n de WiFi */
.btn-wifi {
    background: linear-gradient(to right, #4CAF50, #2E7D32);
    color: var(--primary-white);
    border: 2px solid #4CAF50;
}

.btn-wifi:hover {
    background: linear-gradient(to right, #2E7D32, #1B5E20);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
    border-color: var(--primary-yellow);
}

/* CARRITO */
.cart-items {
    max-height: 300px;
    overflow-y: auto;
    margin: 15px 0;
    padding: 10px;
    background: var(--gray-light);
    border-radius: 10px;
    border: 2px solid var(--gray-light);
}

.cart-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px;
    border-bottom: 2px solid var(--primary-yellow);
    background: var(--primary-white);
    margin-bottom: 8px;
    border-radius: 8px;
    transition: all 0.3s;
}

.cart-item:hover {
    box-shadow: 0 3px 10px var(--shadow-color);
}

.cart-item-info {
    flex: 1;
}

.cart-item-name {
    font-weight: bold;
    color: var(--primary-black);
    margin-bottom: 3px;
    font-size: 15px;
}

.cart-item-details {
    font-size: 13px;
    color: var(--gray-medium);
}

.cart-item-person {
    display: inline-block;
    background: var(--yellow-light);
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 11px;
    margin-left: 5px;
    color: var(--primary-black);
    border: 1px solid var(--primary-yellow);
}

.cart-item-price {
    color: var(--primary-black);
    font-weight: bold;
    font-size: 16px;
    white-space: nowrap;
}

.cart-item-quantity {
    color: var(--primary-black);
    font-weight: bold;
    font-size: 14px;
}

.remove-btn {
    background: none;
    border: none;
    color: var(--primary-black);
    cursor: pointer;
    font-size: 20px;
    padding: 5px;
    margin-left: 10px;
    transition: all 0.3s;
}

.remove-btn:hover {
    color: var(--red-accent);
    transform: scale(1.2);
}

.cart-total {
    text-align: right;
    font-size: 22px;
    font-weight: bold;
    color: var(--primary-black);
    padding: 15px;
    border-top: 3px solid var(--primary-yellow);
    margin-top: 10px;
    background: var(--gray-light);
    border-radius: 0 0 8px 8px;
}

/* BOTONES PRINCIPALES */
.btn {
    display: block;
    width: 100%;
    padding: 16px;
    border: none;
    border-radius: 10px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
    text-align: center;
    margin: 10px 0;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.btn-primary {
    background: linear-gradient(to right, var(--yellow-dark), #FF8C00);
    color: var(--primary-black);
    border: 2px solid var(--primary-yellow);
}

.btn-primary:hover {
    background: linear-gradient(to right, var(--yellow-dark), #FF8C00);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
}

.btn-secondary {
    background: var(--primary-white);
    color: var(--primary-black);
    border: 2px solid var(--primary-black);
}

.btn-secondary:hover {
    background: var(--gray-light);
    transform: translateY(-2px);
}

.btn-waiter {
    background: linear-gradient(to right, var(--primary-black), var(--gray-dark));
    color: var(--primary-white);
    border: 2px solid var(--primary-black);
}

.btn-waiter:hover {
    background: linear-gradient(to right, var(--gray-dark), #222222);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.btn-bill {
    background: linear-gradient(to right, var(--primary-black), var(--gray-dark));
    color: var(--primary-white);
    border: 2px solid var(--primary-black);
}

.btn-bill:hover {
    background: linear-gradient(to right, var(--gray-dark), #222222);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.btn-place-order {
    background: linear-gradient(to right, #FF8C00, #FF8C00);
    color: var(--primary-black);
    border: 2px solid var(--primary-yellow);
    margin-top: 20px;
    font-weight: bold;
}

.btn-place-order:hover {
    background: linear-gradient(to right, var(--yellow-dark), #FF8C00);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
}

/* Estilos para botones de cantidad de personas */
.person-count-btn {
    padding: 12px;
    border: 2px solid var(--primary-black);
    background: var(--primary-white);
    border-radius: 10px;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    transition: all 0.3s;
    text-align: center;
    color: var(--primary-black);
}

.person-count-btn:hover {
    background: var(--yellow-light);
    transform: translateY(-2px);
    border-color: var(--primary-yellow);
}

.person-count-btn.active {
    background: #FF8C00;
    color: var(--primary-black);
    border-color: var(--primary-yellow);
}

/* Estilos para campos din√°micos de nombres */
.person-input-group {
    display: flex;
    gap: 10px;
    margin-bottom: 12px;
    align-items: center;
    animation: slideIn 0.3s ease;
}

.person-input-group input {
    flex: 1;
    padding: 10px;
    border: 2px solid var(--gray-medium);
    border-radius: 8px;
    font-size: 16px;
    background: var(--primary-white);
    color: var(--primary-black);
}

.person-input-group input:focus {
    border-color: var(--primary-yellow);
    outline: none;
    box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.2);
}

.remove-person-btn {
    background: var(--primary-black);
    color: var(--primary-white);
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
}

.remove-person-btn:hover {
    background: var(--red-accent);
    transform: scale(1.1);
}

/* Animaci√≥n para inputs din√°micos */
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(-10px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* Contador de personas */
.people-counter {
    display: inline-block;
    background: var(--yellow-light);
    color: var(--primary-black);
    padding: 4px 10px;
    border-radius: 15px;
    font-size: 12px;
    font-weight: bold;
    margin-left: 10px;
    border: 1px solid var(--primary-yellow);
}

/* PESTA√ëAS */
.tabs {
    display: flex;
    background: var(--primary-black);
    border-bottom: 3px solid var(--primary-yellow);
}

.tab {
    flex: 1;
    padding: 15px;
    text-align: center;
    cursor: pointer;
    border-bottom: 3px solid transparent;
    transition: all 0.3s;
    font-weight: 600;
    color: var(--primary-white);
    background: var(--gray-dark);
}

.tab.active {
    border-bottom-color: var(--primary-yellow);
    background: var(--primary-black);
    color: var(--primary-yellow);
}



/* NOTIFICACIONES */
.notification {
    position: fixed;
    top: 20px;
    right: 20px;
    background: linear-gradient(to right, var(--primary-yellow), var(--yellow-dark));
    color: var(--primary-black);
    padding: 15px 25px;
    border-radius: 10px;
    box-shadow: 0 5px 15px var(--shadow-color);
    z-index: 1000;
    display: none;
    animation: slideInRight 0.3s ease;
    max-width: 300px;
    border: 2px solid var(--primary-yellow);
    font-weight: bold;
}

@keyframes slideInRight {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

/* CONSUMO ACUMULADO */
.consumption-summary {
    background: var(--yellow-light);
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 15px;
    border-left: 5px solid var(--primary-yellow);
    border: 2px solid var(--primary-yellow);
}

.consumption-header {
    font-weight: bold;
    color: var(--primary-black);
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 16px;
}

.consumption-detail {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
    font-size: 14px;
    color: var(--gray-dark);
}

/* RESPONSIVE */
@media (max-width: 500px) {
    .menu-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .product-image {
        height: 120px;
    }
}


/* ESTILOS PARA TIEMPOS */
.time-badge {
    display: inline-block;
    background: var(--primary-black);
    color: var(--primary-white);
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 11px;
    margin-left: 5px;
    font-family: monospace;
}

.served-time {
    background: var(--primary-yellow);
    color: var(--primary-black);
}

.pending-time {
    background: var(--primary-black);
    color: var(--primary-white);
}

/* ESTADO PAGADO */
.paid-status {
    background: linear-gradient(to right, var(--yellow-light), #FFF8DC);
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 15px;
    border-left: 5px solid var(--primary-yellow);
    text-align: center;
    border: 2px solid var(--primary-yellow);
}

.paid-status h3 {
    color: var(--primary-black);
    margin-bottom: 5px;
    font-size: 18px;
}

.paid-status p {
    color: var(--gray-medium);
    font-size: 14px;
}

/* SCROLLBAR PERSONALIZADO */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: var(--gray-light);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb {
    background: var(--primary-yellow);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--yellow-dark);
}




    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="header">
            <h1>üçÄ Bar Irlanda</h1>
            <p>Men√∫ Digital - Ped√≠ desde tu mesa</p>
            <div class="table-info" id="tableInfo">
                Mesa: <span id="tableNumber">-</span>
            </div>
            <div class="client-time" id="currentClientTime">--:--:--</div>
        </div>
        
        <!-- PESTA√ëAS -->
        <div class="tabs" id="tabs">
            <div class="tab active" data-tab="bill">üí∞ Cuenta</div>
            <div class="tab" data-tab="menu">üçΩÔ∏è Men√∫</div>
            <div class="tab" data-tab="cart">üõí Carrito</div>
            <div class="tab" data-tab="actions">‚ö° Servicios</div>
        </div>
        
        <!-- SECCI√ìN 1: TIPO DE CUENTA -->
        <div class="section active" id="section-bill">
            <h2 class="section-title">¬øC√≥mo van a pagar?</h2>
            
            <div class="form-group">
                <button class="btn btn-primary" id="btn-single-bill">
                    üí∞ CUENTA √öNICA
                </button>
                <p style="text-align: center; margin: 10px; color: #666;">o</p>
                <button class="btn btn-secondary" id="btn-split-bill">
                    üîÄ CUENTA SEPARADA
                </button>
            </div>
            
            <div id="split-options" style="display: none;">
                <div class="form-group">
                    <label style="display: block; margin-bottom: 8px; color: #030303; font-weight: 600;">
                        ¬øCu√°ntas personas son?
                    </label>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 15px;">
                        <button type="button" class="person-count-btn" data-count="2">2</button>
                        <button type="button" class="person-count-btn" data-count="3">3</button>
                        <button type="button" class="person-count-btn" data-count="4">4</button>
                        <button type="button" class="person-count-btn" data-count="5">5</button>
                        <button type="button" class="person-count-btn" data-count="6">6</button>
                        <button type="button" class="person-count-btn" data-count="7+" id="btn-more-people">7+</button>
                    </div>
                    
                    <div id="dynamic-people-input" style="display: none;">
                        <div style="margin-bottom: 15px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <h4 style="color: #0d7246;">Ingresar nombres</h4>
                                <button type="button" id="btn-add-person" style="background: #169b62; color: white; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-weight: bold;">
                                    + Agregar m√°s
                                </button>
                            </div>
                            
                            <div style="font-size: 13px; color: #666; margin-bottom: 10px;">
                                Escribe los nombres y aprieta "Agregar m√°s" para a√±adir otra persona
                            </div>
                            
                            <div id="dynamic-people-list">
                                <!-- Los campos din√°micos se generar√°n aqu√≠ -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="peopleNames" style="display: none;">
                    <!-- Los campos de nombres se generar√°n aqu√≠ para opciones fijas (2-6) -->
                </div>
                
                <button class="btn btn-primary" id="btn-confirm-people">
                    üë• Confirmar Personas
                </button>
                
                <button class="btn btn-secondary" id="btn-back-to-count" style="display: none; margin-top: 10px;">
                    ‚Ü©Ô∏è Cambiar cantidad
                </button>
            </div>
        </div>
        
        <!-- SECCI√ìN 2: MEN√ö CON CATEGOR√çAS -->
         <div class="section" id="section-menu">
            <h2 class="section-title">üçΩÔ∏è Nuestro Men√∫</h2>
            
            <!-- Filtros de categor√≠as -->
            <!-- Reemplaza la secci√≥n actual de filtros de categor√≠as con esto: -->
<div class="categories-filter-container">
    <div class="categories-filter" id="categoriesFilter">
        <button class="category-btn active" data-category="all">
            <span class="category-icon">üçΩÔ∏è</span> Todo
        </button>
        <button class="category-btn" data-category="Cervezas">
            <span class="category-icon">üç∫</span> Cervezas
        </button>
        <button class="category-btn" data-category="Gaseosas">
            <span class="category-icon">ü•§</span> Gaseosas
        </button>
        <button class="category-btn" data-category="Whiskies">
            <span class="category-icon">ü•É</span> Whiskies
        </button>
        <button class="category-btn" data-category="Tragos">
            <span class="category-icon">üç∏</span> Tragos
        </button>
        <button class="category-btn" data-category="Pizzas">
            <span class="category-icon">üçï</span> Pizzas
        </button>
        <button class="category-btn" data-category="Ensaladas">
            <span class="category-icon">ü•ó</span> Ensaladas
        </button>
        <button class="category-btn" data-category="Picadas">
            <span class="category-icon">üßÄ</span> Picadas
        </button>
        <button class="category-btn" data-category="Papas">
            <span class="category-icon">üçü</span> Papas
        </button>
        <button class="category-btn" data-category="Empanadas">
            <span class="category-icon">ü•ü</span> Empanadas
        </button>
        
        <!-- Flechas indicadoras -->
        <span class="scroll-arrow left"></span>
        <span class="scroll-arrow right">‚Ä∫</span>
    </div>
    
    <!-- Barra indicadora fija -->
    <div class="scroll-hint"></div>
</div>


            <!-- Selector de Persona (solo si cuenta separada) -->
            <div class="person-selector-container" id="personSelectorContainer">
                <div class="person-selector-title">
                    Seleccionar para qui√©n es:
                </div>
                <div class="people-selector" id="personSelector">
                    <!-- Los botones de personas se generan aqu√≠ -->
                </div>
            </div>
            
            <!-- Productos -->
            <div class="menu-grid" id="menuGrid">
                <!-- Los productos se cargan aqu√≠ -->
            </div>
        </div>
        
        <!-- SECCI√ìN 3: CARRITO -->
        <div class="section" id="section-cart">
            <h2 class="section-title">üõí Tu Pedido</h2>
            
            <!-- Resumen de Consumo Acumulado -->
            <div class="consumption-summary" id="consumptionSummary" style="display: none;">
                <div class="consumption-header">
                    <span>üìä Consumo Acumulado</span>
                    <span id="grandTotal">$0.00</span>
                </div>
                <div class="consumption-detail">
                    <span>‚úÖ Ya servido:</span>
                    <span id="servedTotal">$0.00</span>
                </div>
                <div class="consumption-detail">
                    <span>‚è≥ Pendiente:</span>
                    <span id="pendingTotal">$0.00</span>
                </div>
            </div>
            
            <!-- Estado pagado -->
            <div class="paid-status" id="paidStatus" style="display: none;">
                <h3>‚úÖ PAGO CONFIRMADO</h3>
                <p>Tu cuenta ha sido pagada. ¬°Gracias por tu visita!</p>
                <p style="font-size: 12px; color: #999; margin-top: 5px;">Puedes seguir viendo tu consumo</p>
            </div>
            
            <div class="cart-items" id="cartItems">
                <div style="text-align: center; padding: 40px; color: #666;">
                    El carrito est√° vac√≠o
                </div>
            </div>
            
            <div class="cart-total" id="cartTotal">
                Total: $0.00
            </div>
            
            <button class="btn btn-place-order" id="btnPlaceOrder" style="display: none;">
                üì§ ENVIAR PEDIDOS AL MOZO/A
            </button>
        </div>
        
        <!-- SECCI√ìN 4: ACCIONES -->
        <div class="section" id="section-actions">
            <h2 class="section-title">‚ö° Servicios</h2>
            
           <button class="btn btn-wifi" id="btnShowWifi">
         üì∂ CONEXI√ìN WiFi
        </button>

        <button class="btn btn-waiter" id="btnCallWaiter">
            üñêÔ∏è LLAMAR AL MOZO/A
        </button>

        <button class="btn btn-bill" id="btnRequestBill">
            üí≥ PEDIR LA CUENTA
        </button>
            
            <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 15px;">
                <h3 style="color: #0d7246; margin-bottom: 15px; font-size: 18px;">üìã Resumen de Mesa</h3>
                <div id="tableSummary" style="font-size: 14px; line-height: 1.6;">
                    Cargando...
                </div>
            </div>
        </div>
    </div>









    
    
    <!-- MODAL DE CANTIDAD -->
    <div class="modal-overlay" id="quantityModal">
        <div class="quantity-modal">
            <div class="modal-product-name" id="modalProductName">Producto</div>
            <div style="margin-bottom: 20px;">
                <div id="modalProductPrice" style="font-size: 20px; font-weight: bold; color: var(--primary-black);">
                    Precio unitario: <span id="modalUnitPrice">$0.00</span>
                </div>
                <div id="modalTotalPrice" style="font-size: 24px; font-weight: bold; color: var(--primary-yellow); margin-top: 5px;">
                    Total: <span id="modalTotalAmount">$0.00</span>
                </div>
            </div>
            
            <div style="color: #666; margin-bottom: 20px; font-size: 14px;">
                Selecciona la cantidad:
            </div>
            
            <div class="quantity-selector">
                <button class="qty-btn" id="btnDecrease">-</button>
                <div class="qty-display" id="quantityDisplay">1</div>
                <button class="qty-btn" id="btnIncrease">+</button>
            </div>
            
            <div style="margin: 20px 0;">
                <input type="text" 
                       class="notes-input" 
                       id="productNotes" 
                       placeholder="Notas adicionales (opcional)"
                       maxlength="100">
                <div style="font-size: 12px; color: #999; text-align: left; margin-top: 5px;">
                    Ej: "sin cebolla", "bien cocido", etc.
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="modal-btn modal-cancel" id="btnCancelModal">
                    Cancelar
                </button>
                <button class="modal-btn modal-confirm" id="btnConfirmQuantity">
                    Agregar (<span id="confirmTotalPrice">$0.00</span>)
                </button>
            </div>
        </div>
    </div>


    <!-- MODAL DE WiFi -->
<div class="modal-overlay" id="wifiModal">
    <div class="wifi-modal">
        <div style="text-align: center; margin-bottom: 20px;">
            <div style="font-size: 40px; margin-bottom: 10px;">üì∂</div>
            <div class="modal-product-name">Conexi√≥n WiFi</div>
            <div style="color: #666; font-size: 14px; margin-top: 5px;">
                Bar Irlanda - Conexi√≥n 
            </div>
        </div>
        
        <!-- Informaci√≥n de la red WiFi -->
        <div class="wifi-details">
            <div class="wifi-info-group">
                <div class="wifi-label">
                    <span style="font-size: 20px; margin-right: 10px;">üì°</span>
                    Nombre de la red:
                </div>
                <div class="wifi-value" id="wifiNetwork">
                    Bar-Irlanda
                    
                </div>
            </div>
            
            <div class="wifi-info-group">
                <div class="wifi-label">
                    <span style="font-size: 20px; margin-right: 10px;">üîë</span>
                    Contrase√±a:
                </div>
                <div class="wifi-value" id="wifiPassword">
                    <span id="passwordText">TomarUnaGuinness2026</span>
                    <button class="copy-btn" onclick="copyWifiPassword()">
    üìã Copiar
</button>
                    
                </div>
            </div>
        
            
            <div class="wifi-info-group">
                <div class="wifi-label">
                    <span style="font-size: 20px; margin-right: 10px;">üì±</span>
                    C√≥mo conectarse:
                </div>
                <div class="wifi-instructions">
                    1. Ve a Configuraci√≥n > WiFi<br>
                    2. Busca "<strong>Bar-Irlanda</strong>"<br>
                    3. Ingresa la contrase√±a<br>
                    4. ¬°Disfruta de internet gratis!
                </div>
            </div>
        </div>
        

        
        <!-- Botones del modal -->
        <div class="modal-actions">
            <button class="modal-btn modal-cancel" id="btnCloseWifi">
                Cerrar
            </button>
            
        </div>
    </div>
</div>
    
    <!-- NOTIFICACI√ìN FLOTANTE -->
    <div class="notification" id="notification"></div>
    
    <!-- SOCKET.IO -->
    <script src="https://bar-irlanda-backend.onrender.com/socket.io/socket.io.js"></script>
    <script>
        // ======================
        // VARIABLES GLOBALES
        // ======================
        const socket = io('https://bar-irlanda-backend.onrender.com');
        let currentTable = 1;
        let selectedPerson = 0;
        let selectedCategory = 'all';

        // Estado de la mesa CON CONSUMO PROGRESIVO
        let tableState = {
            pendingCart: [],    // Pedidos enviados pero no servidos
            servedItems: [],    // Productos ya servidos/consumidos
            split: false,
            people: [],
            currentTotal: 0,
            consumptionByPerson: {},
            status: 'choosing'
        };

        // Variables para el modal
        let currentProduct = null;
        let currentQuantity = 1;
        let currentNotes = '';
        // Variable para precio unitario
        let currentUnitPrice = 0;

        // Men√∫ completo
        let menuData = [];

        // ======================
        // FUNCIONES DE UTILIDAD
        // ======================
        function updateClientTime() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            document.getElementById('currentClientTime').textContent = `${hours}:${minutes}:${seconds}`;
        }

        setInterval(updateClientTime, 1000);
        updateClientTime();

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const now = new Date();
            const timeStr = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
            
            notification.innerHTML = `
                <div>${message}</div>
                <div style="font-size: 12px; opacity: 0.8; margin-top: 5px;">üïí ${timeStr}</div>
            `;
            
            notification.style.background = type === 'error' ? '#f44336' : '#4caf50';
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(`section-${sectionId}`).classList.add('active');
            document.querySelector(`.tab[data-tab="${sectionId}"]`).classList.add('active');
        }

        function calculateItemsTotal(items) {
            return items.reduce((sum, item) => {
                const price = parseFloat(item.price) || 0;
                const quantity = parseInt(item.quantity) || 0;
                return sum + (price * quantity);
            }, 0);
        }

// ======================
// VARIABLES PARA NOMBRES DIN√ÅMICOS
// ======================
let dynamicPeopleCount = 0;
let selectedPeopleCount = 0;
let useDynamicInput = false;

// ======================
// FUNCIONES PARA NOMBRES DIN√ÅMICOS
// ======================

function setupPersonCountButtons() {
    // Limpiar selecci√≥n previa
    document.querySelectorAll('.person-count-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // Mostrar/ocultar secciones
    document.getElementById('peopleNames').style.display = 'none';
    document.getElementById('dynamic-people-input').style.display = 'none';
    document.getElementById('btn-back-to-count').style.display = 'none';
    
    useDynamicInput = false;
}

function selectPersonCount(count) {
    setupPersonCountButtons();
    
    if (count === '7+') {
        // Modo din√°mico para 7+ personas
        useDynamicInput = true;
        document.getElementById('btn-more-people').classList.add('active');
        document.getElementById('dynamic-people-input').style.display = 'block';
        document.getElementById('btn-back-to-count').style.display = 'block';
        
        // Iniciar con 7 campos
        dynamicPeopleCount = 7;
        generateDynamicNameFields(7);
    } else {
        // Modo fijo para 2-6 personas
        selectedPeopleCount = parseInt(count);
        document.querySelector(`.person-count-btn[data-count="${count}"]`).classList.add('active');
        document.getElementById('peopleNames').style.display = 'block';
        document.getElementById('btn-back-to-count').style.display = 'block';
        
        // Generar campos fijos
        generateStaticNameFields(selectedPeopleCount);
    }
}

function generateStaticNameFields(count) {
    let html = '<div style="margin-top: 15px;">';
    html += '<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">';
    html += '<h3 style="color: #0d7246;">Nombres:</h3>';
    html += `<span class="people-counter">${count} personas</span>`;
    html += '</div>';
    
    for (let i = 1; i <= count; i++) {
        html += `
            <div style="margin-bottom: 12px;">
                <label for="person${i}" style="display: block; margin-bottom: 5px; color: #555;">
                    Persona ${i}:
                </label>
                <input type="text" 
                       id="person${i}" 
                       placeholder="Nombre o apodo" 
                       required
                       style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 8px;">
            </div>
        `;
    }
    
    html += '</div>';
    document.getElementById('peopleNames').innerHTML = html;
}

function generateDynamicNameFields(initialCount = 7) {
    let html = '<div id="dynamic-people-container">';
    
    for (let i = 1; i <= initialCount; i++) {
        html += createPersonInputRow(i, i === initialCount);
    }
    
    html += '</div>';
    document.getElementById('dynamic-people-list').innerHTML = html;
    
    // Actualizar contador
    updateDynamicPeopleCounter();
}

function createPersonInputRow(index, isLast = false) {
    const removeBtn = index > 1 ? 
        `<button type="button" class="remove-person-btn" onclick="removePersonInput(${index})">√ó</button>` : 
        `<div style="width: 40px;"></div>`; // Espacio vac√≠o para el primero
    
    return `
        <div class="person-input-group" id="person-row-${index}">
            <input type="text" 
                   id="dynamic-person-${index}" 
                   placeholder="Nombre persona ${index}" 
                   class="dynamic-person-input"
                   data-index="${index}"
                   oninput="checkAndAddNextInput(${index})">
            ${removeBtn}
        </div>
    `;
}

function addPersonInput() {
    dynamicPeopleCount++;
    const container = document.getElementById('dynamic-people-container');
    
    if (container) {
        const newRow = createPersonInputRow(dynamicPeopleCount, true);
        container.insertAdjacentHTML('beforeend', newRow);
        
        // Animar la entrada
        const newElement = document.getElementById(`person-row-${dynamicPeopleCount}`);
        newElement.style.animation = 'slideIn 0.3s ease';
        
        // Hacer scroll suave al nuevo input
        setTimeout(() => {
            newElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            document.getElementById(`dynamic-person-${dynamicPeopleCount}`).focus();
        }, 50);
    }
    
    updateDynamicPeopleCounter();
}

function removePersonInput(index) {
    if (dynamicPeopleCount > 2) { // Siempre mantener al menos 2 personas
        const element = document.getElementById(`person-row-${index}`);
        if (element) {
            element.style.animation = 'slideIn 0.3s ease reverse';
            setTimeout(() => {
                element.remove();
                dynamicPeopleCount--;
                reindexPersonInputs();
                updateDynamicPeopleCounter();
            }, 300);
        }
    } else {
        showNotification('Debe haber al menos 2 personas', 'error');
    }
}

function reindexPersonInputs() {
    const inputs = document.querySelectorAll('.dynamic-person-input');
    inputs.forEach((input, newIndex) => {
        const oldIndex = parseInt(input.dataset.index);
        const newId = newIndex + 1;
        
        // Actualizar atributos
        input.id = `dynamic-person-${newId}`;
        input.dataset.index = newId;
        input.placeholder = `Nombre persona ${newId}`;
        
        // Actualizar el contenedor
        const container = input.closest('.person-input-group');
        if (container) {
            container.id = `person-row-${newId}`;
            
            // Actualizar bot√≥n de eliminar
            const removeBtn = container.querySelector('.remove-person-btn');
            if (removeBtn && newId > 1) {
                removeBtn.setAttribute('onclick', `removePersonInput(${newId})`);
            }
        }
    });
}

function checkAndAddNextInput(currentIndex) {
    const input = document.getElementById(`dynamic-person-${currentIndex}`);
    
    if (input && input.value.trim() !== '') {
        // Si es el √∫ltimo campo y tiene contenido, agregar uno nuevo
        if (currentIndex === dynamicPeopleCount) {
            // Esperar un poco para que el usuario termine de escribir
            clearTimeout(window.addInputTimeout);
            window.addInputTimeout = setTimeout(() => {
                addPersonInput();
            }, 500);
        }
    }
}

function updateDynamicPeopleCounter() {
    const counter = document.querySelector('.people-counter');
    if (counter) {
        counter.textContent = `${dynamicPeopleCount} personas`;
    }
}

function validatePeopleInputs() {
    if (useDynamicInput) {
        // Validar campos din√°micos
        const inputs = document.querySelectorAll('.dynamic-person-input');
        const people = [];
        let allValid = true;
        
        inputs.forEach((input, index) => {
            if (input.value.trim()) {
                people.push(input.value.trim());
            } else {
                showNotification(`Ingresa un nombre para la persona ${index + 1}`, 'error');
                input.focus();
                allValid = false;
            }
        });
        
        if (allValid && people.length >= 2) {
            return people;
        } else if (people.length < 2) {
            showNotification('Debe haber al menos 2 personas', 'error');
            return null;
        }
        return null;
    } else {
        // Validar campos est√°ticos (2-6 personas)
        const people = [];
        let allValid = true;
        
        for (let i = 1; i <= selectedPeopleCount; i++) {
            const input = document.getElementById(`person${i}`);
            if (input && input.value.trim()) {
                people.push(input.value.trim());
            } else {
                showNotification(`Ingresa un nombre para la persona ${i}`, 'error');
                allValid = false;
                break;
            }
        }
        
        return allValid ? people : null;
    }
}

        function formatTimeForDisplay(dateString) {
            if (!dateString) return '';
            try {
                const date = new Date(dateString);
                const hours = date.getHours().toString().padStart(2, '0');
                const minutes = date.getMinutes().toString().padStart(2, '0');
                return `${hours}:${minutes}`;
            } catch (e) {
                return '';
            }
        }

        // ======================
        // FUNCIONES DE RENDERIZADO MEJORADAS
        // ======================
        function renderMenu() {
            const menuContainer = document.getElementById('menuGrid');
            
            // Si el estado es pagado, deshabilitar agregar productos
            if (tableState.status === 'paid_but_occupied') {
                menuContainer.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #666;">
                        <div style="font-size: 24px; margin-bottom: 10px;">üí∞</div>
                        <h3>Cuenta Pagada</h3>
                        <p style="margin-top: 10px; color: #999;">No puedes agregar m√°s productos</p>
                    </div>
                `;
                return;
            }
            
            // Filtrar productos por categor√≠a
            let filteredProducts = menuData;
            if (selectedCategory !== 'all') {
                filteredProducts = menuData.filter(product => product.category === selectedCategory);
            }
            
            // Mostrar selector de persona si es cuenta separada
            const personContainer = document.getElementById('personSelectorContainer');
            const personSelector = document.getElementById('personSelector');
            
            if (tableState.split && tableState.people.length > 0) {
                personContainer.style.display = 'block';
                
                let selectorHtml = '';
                tableState.people.forEach((person, index) => {
                    // Calcular consumo de esta persona
                    const personServed = tableState.servedItems
                        .filter(item => item.person === person)
                        .reduce((sum, item) => sum + (item.price * item.quantity), 0);
                    
                    const personPending = tableState.pendingCart
                        .filter(item => item.person === person)
                        .reduce((sum, item) => sum + (item.price * item.quantity), 0);
                    
                    const personTotal = personServed + personPending;
                    
                    selectorHtml += `
                        <button class="person-btn ${index === selectedPerson ? 'active' : ''}" 
                                onclick="selectPerson(${index})"
                                title="Total: $${personTotal.toFixed(2)}">
                            üë§ ${person}
                            ${personTotal > 0 ? `<span style="font-size: 11px; margin-left: 5px;">$${personTotal.toFixed(2)}</span>` : ''}
                        </button>
                    `;
                });
                personSelector.innerHTML = selectorHtml;
            } else {
                personContainer.style.display = 'none';
            }
            
            // Renderizar productos
            if (filteredProducts.length === 0) {
                menuContainer.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #666;">
                        No hay productos en esta categor√≠a
                    </div>
                `;
                return;
            }
            
            let menuHtml = '';
filteredProducts.forEach(product => {
    // Si no hay imagen, usar un placeholder seg√∫n la categor√≠a
    let imageUrl = product.image || getPlaceholderImage(product.category);
    
    menuHtml += `
        <div class="product-card" data-product-id="${product.id}">
            ${product.popular ? '<div class="product-badge">‚≠ê Popular</div>' : ''}
            
            <img src="${imageUrl}" 
                 alt="${product.name}" 
                 class="product-image"
                 onerror="this.src='${getPlaceholderImage(product.category)}'">
            
            <div class="product-content">
                <div class="product-info">
                    <div class="product-name">${product.name}</div>
                    <div class="product-description">${product.description}</div>
                    <div class="product-price">$${product.price.toFixed(2)}</div>
                </div>
                
                <button class="add-btn" onclick="openQuantityModal(${product.id})">
                    + Pedir
                </button>
            </div>
        </div>
    `;
});
            
            menuContainer.innerHTML = menuHtml;
        }




        // AGREGAR ESTO A TU ARCHIVO JAVASCRIPT EXISTENTE

function setupScrollHint() {
    const categoriesFilter = document.getElementById('categoriesFilter');
    const scrollHint = document.querySelector('.scroll-hint');
    const leftArrow = document.querySelector('.scroll-arrow.left');
    const rightArrow = document.querySelector('.scroll-arrow.right');
    
    if (!categoriesFilter || !scrollHint) return;
    
    function updateScrollHint() {
        const scrollWidth = categoriesFilter.scrollWidth;
        const clientWidth = categoriesFilter.clientWidth;
        const scrollLeft = categoriesFilter.scrollLeft;
        const maxScroll = scrollWidth - clientWidth;
        
        // Actualizar el ancho del indicador basado en cu√°nto contenido hay
        if (scrollWidth > clientWidth) {
            // Mostrar indicador
            scrollHint.style.display = 'block';
            
            // Calcular el ancho del indicador (proporcional al contenido visible)
            const visibleRatio = clientWidth / scrollWidth;
            const indicatorWidth = Math.max(20, visibleRatio * 100); // M√≠nimo 20%
            
            // Calcular la posici√≥n del indicador
            const scrollPercent = scrollLeft / maxScroll;
            const indicatorPosition = scrollPercent * (100 - indicatorWidth);
            
            // Actualizar el indicador visual
            scrollHint.style.setProperty('--indicator-width', `${indicatorWidth}%`);
            scrollHint.style.setProperty('--indicator-position', `${indicatorPosition}%`);
            
            // Actualizar el pseudo-elemento
            const indicator = scrollHint.querySelector(':after') || scrollHint;
            indicator.style.width = `${indicatorWidth}%`;
            indicator.style.left = `${indicatorPosition}%`;
            
            // Mostrar/ocultar flechas seg√∫n la posici√≥n
            if (scrollLeft > 10) {
                leftArrow.style.display = 'block';
            } else {
                leftArrow.style.display = 'none';
            }
            
            if (scrollLeft < maxScroll - 10) {
                rightArrow.style.display = 'block';
            } else {
                rightArrow.style.display = 'none';
            }
        } else {
            // Ocultar todo si no hay scroll
            scrollHint.style.display = 'none';
            leftArrow.style.display = 'none';
            rightArrow.style.display = 'none';
        }
    }
    
    // Inicializar
    updateScrollHint();
    
    // Actualizar al hacer scroll
    categoriesFilter.addEventListener('scroll', updateScrollHint);
    
    // Actualizar al cambiar tama√±o de ventana
    window.addEventListener('resize', updateScrollHint);
    
    // Actualizar cuando se cargue el contenido
    setTimeout(updateScrollHint, 100);
    setTimeout(updateScrollHint, 500);
}

// Llamar cuando el DOM est√© listo
document.addEventListener('DOMContentLoaded', function() {
    setupScrollHint();
    
    // Tambi√©n actualizar cuando se cambien las categor√≠as
    document.querySelectorAll('.category-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            setTimeout(setupScrollHint, 100);
        });
    });
});



        function getPlaceholderImage(category) {
    const placeholders = {
        'Cervezas': 'https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
        'Gaseosas': 'https://images.unsplash.com/photo-1629203851122-3726ecdf080e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
        'Whiskies': 'https://images.unsplash.com/photo-1596462502278-27bfdc403348?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
        'Tragos': 'https://images.unsplash.com/photo-1470337458703-46ad1756a187?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
        'Pizzas': 'https://images.unsplash.com/photo-1604068549290-dea0e4a305ca?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
        'Ensaladas': 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
        'Picadas': 'https://images.unsplash.com/photo-1559925393-8be0ec4767c8?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
        'Papas': 'https://images.unsplash.com/photo-1630383249895-2f10d7a6e941?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
        'Empanadas': 'https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80'
    };
    
    return placeholders[category] || 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80';
}

        function renderCart() {
            const cartContainer = document.getElementById('cartItems');
            const consumptionSummary = document.getElementById('consumptionSummary');
            const paidStatus = document.getElementById('paidStatus');
            const btnPlaceOrder = document.getElementById('btnPlaceOrder');
            
            const servedTotal = calculateItemsTotal(tableState.servedItems);
            const pendingTotal = calculateItemsTotal(tableState.pendingCart);
            const grandTotal = servedTotal + pendingTotal;
            
            // Mostrar estado pagado si corresponde
            if (tableState.status === 'paid_but_occupied') {
                paidStatus.style.display = 'block';
                consumptionSummary.style.display = 'none';
                btnPlaceOrder.style.display = 'none';
            } else {
                paidStatus.style.display = 'none';
                
                // Actualizar resumen de consumo
                document.getElementById('servedTotal').textContent = `$${servedTotal.toFixed(2)}`;
                document.getElementById('pendingTotal').textContent = `$${pendingTotal.toFixed(2)}`;
                document.getElementById('grandTotal').textContent = `$${grandTotal.toFixed(2)}`;
                
                // Mostrar u ocultar resumen seg√∫n haya consumo
                if (servedTotal > 0 || pendingTotal > 0) {
                    consumptionSummary.style.display = 'block';
                } else {
                    consumptionSummary.style.display = 'none';
                }
                
                // Mostrar u ocultar bot√≥n de enviar pedido
                if (tableState.pendingCart.length > 0) {
                    btnPlaceOrder.style.display = 'block';
                } else {
                    btnPlaceOrder.style.display = 'none';
                }
            }
            
            // Mostrar items
            if (tableState.pendingCart.length === 0 && tableState.servedItems.length === 0) {
                cartContainer.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        ${tableState.status === 'paid_but_occupied' ? 
                            '‚úÖ Consumo registrado correctamente' : 
                            'No hay pedidos en curso'}
                    </div>
                `;
                
                document.getElementById('cartTotal').innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-size: 22px; font-weight: bold; color: #0d7246;">
                                Total: $${grandTotal.toFixed(2)}
                            </div>
                        </div>
                    </div>
                `;
                return;
            }
            
            // Mostrar items servidos
            let itemsHtml = '';
            
            if (tableState.servedItems.length > 0) {
                itemsHtml += `
                    <div style="margin-bottom: 20px;">
                        <div style="font-weight: bold; color: #2e7d32; margin-bottom: 10px; padding-bottom: 5px; border-bottom: 2px solid #e8f5e9;">
                            ‚úÖ Ya servido:
                        </div>
                `;
                
                tableState.servedItems.forEach(item => {
                    const itemTotal = (parseFloat(item.price) || 0) * (parseInt(item.quantity) || 1);
                    const servedTime = formatTimeForDisplay(item.servedAt);
                    
                    itemsHtml += `
                        <div class="cart-item" style="opacity: 0.9; background: #f8f9fa;">
                            <div class="cart-item-info">
                                <div class="cart-item-name">${item.name}</div>
                                <div class="cart-item-details">
                                    <span class="cart-item-quantity">${item.quantity}x</span>
                                    ${item.notes ? `<span> ‚Ä¢ ${item.notes}</span>` : ''}
                                    ${tableState.split && item.person !== 'Todos' ? 
                                        `<span class="cart-item-person">${item.person}</span>` : ''}
                                    ${servedTime ? `<span class="time-badge served-time">üïí ${servedTime}</span>` : ''}
                                    <span style="color: #2e7d32; margin-left: 10px; font-size: 12px;">‚úì Servido</span>
                                </div>
                            </div>
                            <div class="cart-item-price">$${itemTotal.toFixed(2)}</div>
                        </div>
                    `;
                });
                
                itemsHtml += `</div>`;
            }
            
            // Mostrar pedidos pendientes (solo si no est√° pagado)
            if (tableState.pendingCart.length > 0 && tableState.status !== 'paid_but_occupied') {
                itemsHtml += `
                    <div style="margin-bottom: 20px;">
                        <div style="font-weight: bold; color: #ef6c00; margin-bottom: 10px; padding-bottom: 5px; border-bottom: 2px solid #fff3e0;">
                            ‚è≥ Pendiente:
                        </div>
                `;
                
                tableState.pendingCart.forEach(item => {
                    const itemTotal = (parseFloat(item.price) || 0) * (parseInt(item.quantity) || 1);
                    const addedTime = formatTimeForDisplay(item.addedAt);
                    
                    itemsHtml += `
                        <div class="cart-item">
                            <div class="cart-item-info">
                                <div class="cart-item-name">${item.name}</div>
                                <div class="cart-item-details">
                                    <span class="cart-item-quantity">${item.quantity}x</span>
                                    ${item.notes ? `<span> ‚Ä¢ ${item.notes}</span>` : ''}
                                    ${tableState.split && item.person !== 'Todos' ? 
                                        `<span class="cart-item-person">${item.person}</span>` : ''}
                                    ${addedTime ? `<span class="time-badge pending-time">üïí ${addedTime}</span>` : ''}
                                    <span style="color: #ef6c00; margin-left: 10px; font-size: 12px;">‚è≥ En preparaci√≥n</span>
                                </div>
                            </div>
                            <div class="cart-item-price">$${itemTotal.toFixed(2)}</div>
                            <button class="remove-btn" onclick="removeItem(${item.id})">
                                √ó
                            </button>
                        </div>
                    `;
                });
                
                itemsHtml += `</div>`;
            }
            
            cartContainer.innerHTML = itemsHtml;
            
            // Actualizar total
            document.getElementById('cartTotal').innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div style="font-size: 22px; font-weight: bold; color: #0d7246;">
                            Total: $${grandTotal.toFixed(2)}
                        </div>
                        ${tableState.status === 'paid_but_occupied' ? 
                            '<div style="font-size: 12px; color: #9c27b0;">‚úÖ PAGADO</div>' : ''}
                    </div>
                </div>
            `;
        }

        function updateTableSummary() {
            let summaryHtml = '';
            
            // Calcular totales
            const servedTotal = calculateItemsTotal(tableState.servedItems);
            const pendingTotal = calculateItemsTotal(tableState.pendingCart);
            const grandTotal = servedTotal + pendingTotal;
            
            // Mostrar estado actual
            if (tableState.status === 'paid_but_occupied') {
                summaryHtml += `
                    <div style="background: #f3e5f5; padding: 15px; border-radius: 10px; margin-bottom: 15px; border-left: 4px solid #9c27b0;">
                        <div style="font-weight: bold; color: #7b1fa2; text-align: center;">
                            ‚úÖ PAGO CONFIRMADO
                        </div>
                        <div style="text-align: center; font-size: 13px; color: #666; margin-top: 5px;">
                            La mesa estar√° disponible pronto
                        </div>
                    </div>
                `;
            }
            
            // CONSUMO ACUMULADO
            summaryHtml += `
                <div style="background: #e3f2fd; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                    <div style="font-weight: bold; color: #1565c0; margin-bottom: 10px; font-size: 16px;">
                        üìä Consumo Acumulado
                    </div>
                    <div style="font-size: 14px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>‚úÖ Ya servido:</span>
                            <span style="font-weight: bold; color: #2e7d32;">$${servedTotal.toFixed(2)}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>‚è≥ Pendiente:</span>
                            <span style="font-weight: bold; color: #ef6c00;">$${pendingTotal.toFixed(2)}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 10px; padding-top: 10px; border-top: 2px solid #bbdefb; font-size: 16px;">
                            <span><strong>TOTAL:</strong></span>
                            <span><strong style="color: #0d7246;">$${grandTotal.toFixed(2)}</strong></span>
                        </div>
                    </div>
                </div>
            `;
            
            // DETALLE DE ITEMS SERVIDOS
            if (tableState.servedItems.length > 0) {
                summaryHtml += `
                    <div style="margin-bottom: 15px;">
                        <div style="font-weight: bold; color: #2e7d32; margin-bottom: 8px; font-size: 14px;">
                            ‚úÖ Items Servidos (${tableState.servedItems.length})
                        </div>
                        <div style="max-height: 150px; overflow-y: auto; background: #f8f9fa; padding: 10px; border-radius: 8px;">
                `;
                
                tableState.servedItems.forEach((item, index) => {
                    const itemTotal = (parseFloat(item.price) || 0) * (parseInt(item.quantity) || 1);
                    const servedTime = formatTimeForDisplay(item.servedAt);
                    
                    summaryHtml += `
                        <div style="margin-bottom: 6px; padding-bottom: 6px; border-bottom: 1px solid #eee; font-size: 13px;">
                            <div style="font-weight: 600; color: #333;">${item.quantity}x ${item.name}</div>
                            <div style="display: flex; justify-content: space-between; margin-top: 2px;">
                                <div style="color: #666;">
                                    ${item.notes ? `üìù ${item.notes}` : ''}
                                    ${tableState.split && item.person !== 'Todos' ? 
                                        `<span style="background: #e9ecef; padding: 1px 6px; border-radius: 10px; font-size: 11px; margin-left: 5px;">${item.person}</span>` : ''}
                                    ${servedTime ? `<span style="color: #2e7d32; margin-left: 5px;">üïí ${servedTime}</span>` : ''}
                                </div>
                                <div style="font-weight: bold;">$${itemTotal.toFixed(2)}</div>
                            </div>
                        </div>
                    `;
                });
                
                summaryHtml += `</div></div>`;
            }
            
            // DETALLE DE PEDIDOS PENDIENTES
            if (tableState.pendingCart.length > 0 && tableState.status !== 'paid_but_occupied') {
                summaryHtml += `
                    <div style="margin-bottom: 15px;">
                        <div style="font-weight: bold; color: #ef6c00; margin-bottom: 8px; font-size: 14px;">
                            ‚è≥ Pedidos Pendientes (${tableState.pendingCart.length})
                        </div>
                        <div style="max-height: 150px; overflow-y: auto; background: #fff8e1; padding: 10px; border-radius: 8px;">
                `;
                
                tableState.pendingCart.forEach((item, index) => {
                    const itemTotal = (parseFloat(item.price) || 0) * (parseInt(item.quantity) || 1);
                    const addedTime = formatTimeForDisplay(item.addedAt);
                    
                    summaryHtml += `
                        <div style="margin-bottom: 6px; padding-bottom: 6px; border-bottom: 1px solid #ffe0b2; font-size: 13px;">
                            <div style="font-weight: 600; color: #333;">${item.quantity}x ${item.name}</div>
                            <div style="display: flex; justify-content: space-between; margin-top: 2px;">
                                <div style="color: #666;">
                                    ${item.notes ? `üìù ${item.notes}` : ''}
                                    ${tableState.split && item.person !== 'Todos' ? 
                                        `<span style="background: #e9ecef; padding: 1px 6px; border-radius: 10px; font-size: 11px; margin-left: 5px;">${item.person}</span>` : ''}
                                    ${addedTime ? `<span style="color: #ef6c00; margin-left: 5px;">üïí ${addedTime}</span>` : ''}
                                </div>
                                <div style="font-weight: bold;">$${itemTotal.toFixed(2)}</div>
                            </div>
                        </div>
                    `;
                });
                
                summaryHtml += `</div></div>`;
            }
            
            // RESUMEN POR PERSONA (si es cuenta separada)
            if (tableState.split && tableState.people.length > 0 && grandTotal > 0) {
                summaryHtml += `
                    <div style="background: #f3e5f5; padding: 15px; border-radius: 10px;">
                        <div style="font-weight: bold; color: #7b1fa2; margin-bottom: 10px; font-size: 16px;">
                            üë• Por Persona
                        </div>
                `;
                
                tableState.people.forEach(person => {
                    const personServed = tableState.servedItems
                        .filter(item => item.person === person)
                        .reduce((sum, item) => sum + (parseFloat(item.price) * parseInt(item.quantity)), 0);
                    
                    const personPending = tableState.status !== 'paid_but_occupied' ? 
                        tableState.pendingCart
                            .filter(item => item.person === person)
                            .reduce((sum, item) => sum + (parseFloat(item.price) * parseInt(item.quantity)), 0) : 0;
                    
                    const personTotal = personServed + personPending;
                    
                    summaryHtml += `
                        <div style="margin-bottom: 8px;">
                            <div style="font-weight: bold; color: #333;">üë§ ${person}</div>
                            <div style="font-size: 13px; color: #666; display: flex; justify-content: space-between;">
                                <span>Servido: $${personServed.toFixed(2)}</span>
                                ${tableState.status !== 'paid_but_occupied' ? 
                                    `<span>Pendiente: $${personPending.toFixed(2)}</span>` : ''}
                                <span><strong>Total: $${personTotal.toFixed(2)}</strong></span>
                            </div>
                        </div>
                    `;
                });
                
                summaryHtml += `</div>`;
            } else if (grandTotal > 0) {
                summaryHtml += `
                    <div style="background: #e8f5e9; padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-weight: bold; color: #2e7d32;">
                            üí∞ Cuenta √önica
                        </div>
                        <div style="font-size: 14px; color: #555; margin-top: 5px;">
                            Todos pagan juntos
                        </div>
                    </div>
                `;
            }
            
            document.getElementById('tableSummary').innerHTML = summaryHtml;
        }

        // ======================
        // FUNCIONES DEL MODAL
        // ======================
        function openQuantityModal(productId) {
    // No permitir agregar si ya se pag√≥
    if (tableState.status === 'paid_but_occupied') {
        showNotification('No puedes agregar m√°s productos despu√©s de pagar', 'error');
        return;
    }
    
    const product = menuData.find(p => p.id === productId);
    if (!product) return;
    
    currentProduct = product;
    currentQuantity = 1;
    currentNotes = '';
    currentUnitPrice = parseFloat(product.price) || 0;
    
    document.getElementById('modalProductName').textContent = product.name;
    document.getElementById('modalUnitPrice').textContent = `$${currentUnitPrice.toFixed(2)}`;
    document.getElementById('quantityDisplay').textContent = '1';
    document.getElementById('productNotes').value = '';
    
    // Calcular y mostrar el precio total inicial
    updateModalTotalPrice();
    
    document.getElementById('quantityModal').classList.add('active');
}

function updateModalTotalPrice() {
    if (!currentProduct) return;
    
    const totalPrice = currentUnitPrice * currentQuantity;
    
    // Actualizar el precio total en el modal
    document.getElementById('modalTotalAmount').textContent = `$${totalPrice.toFixed(2)}`;
    
    // Tambi√©n actualizar el precio en el bot√≥n de confirmar
    document.getElementById('confirmTotalPrice').textContent = `$${totalPrice.toFixed(2)}`;
}

        function closeQuantityModal() {
    // Resetear el precio unitario tambi√©n
    currentUnitPrice = 0;
    currentProduct = null;
    currentQuantity = 1;
    currentNotes = '';
    
    document.getElementById('quantityModal').classList.remove('active');
}

        function confirmAddToCart() {
            if (!currentProduct) return;
            
            const personName = tableState.split ? 
                tableState.people[selectedPerson] : 'Todos';
            
            // Crear item del carrito PENDIENTE con tiempo
            const now = new Date();
            const cartItem = {
                id: Date.now(),
                productId: currentProduct.id,
                name: currentProduct.name,
                price: currentProduct.price,
                quantity: currentQuantity,
                notes: currentNotes.trim(),
                person: personName,
                addedAt: now.toISOString(),
                addedAtFormatted: formatTimeForDisplay(now)
            };
            
            // Enviar al servidor
            socket.emit('add-to-cart', {
                productId: currentProduct.id,
                quantity: currentQuantity,
                notes: currentNotes.trim(),
                personIndex: tableState.split ? selectedPerson : undefined
            });
            
            closeQuantityModal();
            showNotification(`‚úÖ ${currentQuantity}x ${currentProduct.name} agregado para ${personName}`);
        }

        // ======================
        // FUNCIONES DEL CARRITO
        // ======================
        function removeItem(itemId) {
            // No permitir eliminar si ya se pag√≥
            if (tableState.status === 'paid_but_occupied') {
                showNotification('No puedes modificar el consumo despu√©s de pagar', 'error');
                return;
            }
            
            socket.emit('remove-from-cart', itemId);
        }

        function selectPerson(index) {
            selectedPerson = index;
            
            document.querySelectorAll('.person-btn').forEach((btn, i) => {
                btn.classList.toggle('active', i === index);
            });
        }

        function placeOrder() {
            if (tableState.pendingCart.length === 0) {
                showNotification('No hay pedidos pendientes para enviar', 'error');
                return;
            }
            
            const now = new Date();
            const timeStr = formatTimeForDisplay(now);
            
            if (confirm(`¬øEnviar ${tableState.pendingCart.length} pedidos a la barra/cocina?`)) {
                socket.emit('place-order');
                showNotification(`üì§ Pedidos enviados a la barra ${timeStr ? 'a las ' + timeStr : ''}`);
            }
        }

        // ======================
        // EVENT LISTENERS
        // ======================
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            currentTable = urlParams.get('mesa') || 1;
            document.getElementById('tableNumber').textContent = currentTable;
            
            socket.emit('join-table', currentTable);
            
            // Cargar men√∫
            fetch('https://bar-irlanda-backend.onrender.com/api/menu')
                .then(response => response.json())
                .then(data => {
                    menuData = data;
                    renderMenu();
                });
            
            // Pesta√±as
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    showSection(this.dataset.tab);
                });
            });
            
            // Filtros de categor√≠a
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.category-btn').forEach(b => {
                        b.classList.remove('active');
                    });
                    
                    this.classList.add('active');
                    selectedCategory = this.dataset.category;
                    renderMenu();
                });
            });
            
            // Tipo de cuenta - Sistema din√°mico de personas
document.querySelectorAll('.person-count-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        selectPersonCount(this.dataset.count);
    });
});

// Bot√≥n para agregar m√°s personas din√°micamente
document.getElementById('btn-add-person').addEventListener('click', function() {
    addPersonInput();
});

// Bot√≥n para volver a seleccionar cantidad
document.getElementById('btn-back-to-count').addEventListener('click', function() {
    setupPersonCountButtons();
    this.style.display = 'none';
});

// Inicializar con 2 personas seleccionadas
selectPersonCount('2');
            
            document.getElementById('btn-single-bill').addEventListener('click', function() {
                socket.emit('set-bill-type', {
                    split: false,
                    people: []
                });
                showSection('menu');
            });
            
            document.getElementById('btn-split-bill').addEventListener('click', function() {
                document.getElementById('split-options').style.display = 'block';
            });
            
           document.getElementById('btn-confirm-people').addEventListener('click', function() {
    const people = validatePeopleInputs();
    
    if (people && people.length >= 2) {
        socket.emit('set-bill-type', {
            split: true,
            people: people
        });
        showSection('menu');
        
        // Mostrar notificaci√≥n con cantidad de personas
        showNotification(`Cuenta separada entre ${people.length} personas`);
    }
});
            
            // Modal
            document.getElementById('btnDecrease').addEventListener('click', function() {
    if (currentQuantity > 1) {
        currentQuantity--;
        document.getElementById('quantityDisplay').textContent = currentQuantity;
        updateModalTotalPrice(); // ¬°Esta es la l√≠nea importante!
    }
});

document.getElementById('btnIncrease').addEventListener('click', function() {
    if (currentQuantity < 20) {
        currentQuantity++;
        document.getElementById('quantityDisplay').textContent = currentQuantity;
        updateModalTotalPrice(); // ¬°Esta es la l√≠nea importante!
    }
});
            
            document.getElementById('productNotes').addEventListener('input', function() {
                currentNotes = this.value;
            });
            
            document.getElementById('btnCancelModal').addEventListener('click', closeQuantityModal);
            document.getElementById('btnConfirmQuantity').addEventListener('click', confirmAddToCart);
            
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    closeQuantityModal();
                }
            });
            
            document.getElementById('quantityModal').addEventListener('click', function(event) {
                if (event.target === this) {
                    closeQuantityModal();
                }
            });
            
            // Acciones
            document.getElementById('btnCallWaiter').addEventListener('click', function() {
                const now = new Date();
                const timeStr = formatTimeForDisplay(now);
                socket.emit('call-waiter');
                showNotification(`üñêÔ∏è Mozo notificado ${timeStr ? 'a las ' + timeStr : ''}`);
            });
            
            document.getElementById('btnRequestBill').addEventListener('click', function() {
                // No permitir pedir cuenta si ya se pag√≥
                if (tableState.status === 'paid_but_occupied') {
                    showNotification('Ya has pagado la cuenta', 'error');
                    return;
                }
                
                const now = new Date();
                const timeStr = formatTimeForDisplay(now);
                socket.emit('request-bill');
                showNotification(`üí∞ Cuenta solicitada ${timeStr ? 'a las ' + timeStr : ''}`);
            });
            
            document.getElementById('btnPlaceOrder').addEventListener('click', placeOrder);
        });


        // ======================
// FUNCIONALIDAD WiFi - VERSI√ìN CORREGIDA
// ======================

// Funci√≥n para copiar la contrase√±a del WiFi
function copyWifiPassword() {
    const password = 'TomarUnaGuinness2026'; // La contrase√±a que aparece en tu HTML
    const copyBtn = document.querySelector('.copy-btn');
    
    navigator.clipboard.writeText(password).then(() => {
        showNotification('‚úÖ Contrase√±a copiada al portapapeles');
        
        // Animaci√≥n del bot√≥n
        if (copyBtn) {
            copyBtn.classList.add('copied');
            copyBtn.textContent = '‚úÖ Copiado!';
            
            setTimeout(() => {
                copyBtn.classList.remove('copied');
                copyBtn.textContent = 'üìã Copiar';
            }, 2000);
        }
    }).catch(err => {
        console.error('Error al copiar: ', err);
        showNotification('‚ùå Error al copiar', 'error');
    });
}

// Bot√≥n de WiFi
document.getElementById('btnShowWifi').addEventListener('click', function() {
    document.getElementById('wifiModal').classList.add('active');
});

// Cerrar modal WiFi
document.getElementById('btnCloseWifi').addEventListener('click', function() {
    document.getElementById('wifiModal').classList.remove('active');
});

// Cerrar modal WiFi al hacer clic fuera
document.getElementById('wifiModal').addEventListener('click', function(event) {
    if (event.target === this) {
        document.getElementById('wifiModal').classList.remove('active');
    }
});

        // ======================
        // SOCKET.IO LISTENERS
        // ======================
        socket.on('table-connected', function(data) {
            tableState = data.tableState;
            renderMenu();
            renderCart();
            updateTableSummary();
        });

        socket.on('bill-type-set', function(data) {
            tableState.split = data.split;
            tableState.people = data.people;
            tableState.consumptionByPerson = data.consumptionByPerson || {};
            selectedPerson = 0;
            
            renderMenu();
            renderCart();
            updateTableSummary();
            
            showNotification(
                data.split ? 
                    `Cuenta separada entre ${data.people.length} personas` :
                    'Cuenta √∫nica - Todos pagan juntos'
            );
        });

        socket.on('cart-updated', function(data) {
            tableState.pendingCart = data.pendingCart || [];
            tableState.servedItems = data.servedItems || [];
            tableState.split = data.split;
            tableState.people = data.people;
            tableState.currentTotal = data.currentTotal || 0;
            tableState.consumptionByPerson = data.consumptionByPerson || {};
            tableState.status = data.status || tableState.status;
            
            renderCart();
            renderMenu();
            updateTableSummary();
        });

        socket.on('order-confirmed', function(data) {
            const timeStr = data.time ? ' a las ' + data.time : '';
            showNotification(`‚úÖ ${data.message}${timeStr}`);
        });

        socket.on('items-served', function(data) {
            const timeStr = data.serveTime ? ' a las ' + data.serveTime : '';
            showNotification(`‚úÖ ${data.items.length} items servidos${timeStr}`);
        });

        socket.on('waiter-called', function(data) {
            const timeStr = data.time ? ' a las ' + data.time : '';
            showNotification(`‚úÖ Mozo notificado${timeStr}`);
        });

        socket.on('bill-prepared', function(bill) {
            const timeStr = bill.requestedAtFormatted ? ' - Solicitado: ' + bill.requestedAtFormatted : '';
            showNotification(`‚úÖ Cuenta preparada: $${bill.total.toFixed(2)}${timeStr}`);
        });

        socket.on('waiter-arriving', function() {
            showNotification('üë®‚Äçüíº El mozo est√° en camino');
        });

        socket.on('bill-paid', function(data) {
            const now = new Date();
            const timeStr = formatTimeForDisplay(now);
            showNotification(`‚úÖ Pago confirmado - ¬°Gracias! - Pagado: ${timeStr}`);
        });

        socket.on('table-freed', function(data) {
            showNotification('‚úÖ Mesa liberada - ¬°Hasta la pr√≥xima!');
            
            // Reiniciar todo
            tableState = {
                pendingCart: [],
                servedItems: [],
                split: false,
                people: [],
                currentTotal: 0,
                consumptionByPerson: {},
                status: 'choosing'
            };
            
            renderCart();
            renderMenu();
            updateTableSummary();
            showSection('bill');
        });

        socket.on('reset-to-bill-selection', function() {
            showSection('bill');
        });

        socket.on('error', function(data) {
            showNotification(data.message, 'error');
        });

        // Ping para mantener conexi√≥n
        setInterval(() => {
            socket.emit('ping');
        }, 15000);
    </script>
</body>
</html>